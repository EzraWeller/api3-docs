(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{554:function(t,e,o){"use strict";o.r(e);var r=o(8),n=Object(r.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"frontmatter-title"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[t._v("#")]),t._v(" "+t._s(t.$frontmatter.title))]),t._v(" "),o("TocHeader"),t._v(" "),o("TOC",{staticClass:"table-of-contents",attrs:{"include-level":[2,3]}}),t._v(" "),o("p",[t._v("Complete the following before settings authorizers.")]),t._v(" "),o("ul",[o("li",[o("RouterLink",{attrs:{to:"/next/grp-providers/guides/provider/api-integration.html"}},[t._v("API Integration")])],1),t._v(" "),o("li",[o("RouterLink",{attrs:{to:"/next/grp-providers/guides/provider/configuring-airnode.html"}},[t._v("Configuring Airnode")])],1),t._v(" "),o("li",[o("RouterLink",{attrs:{to:"/next/grp-providers/guides/provider/deploying-airnode.html"}},[t._v("Deploying Airnode")])],1)]),t._v(" "),o("p",[t._v("When you deployed your Airnode a receipt file was generated. In it is the "),o("code",[t._v("airnodeId")]),t._v(". Requesters use your "),o("code",[t._v("airnodeId")]),t._v(" and an "),o("code",[t._v("endpointId")]),t._v(" to make requests to your Airnode endpoints. However, you probably do not want to serve your Airnode endpoints publicly.")]),t._v(" "),o("ul",[o("li",[t._v("Only serve your own client contracts")]),t._v(" "),o("li",[t._v("Only serve requesters who have made a subscription payment")]),t._v(" "),o("li",[t._v("Only serve requesters who have gone through KYC")])]),t._v(" "),o("p",[t._v("In this guide, we will explain how you can achieve this.")]),t._v(" "),o("h2",{attrs:{id:"authorizers"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#authorizers"}},[t._v("#")]),t._v(" "),o("code",[t._v("authorizers")])]),t._v(" "),o("Todo",[o("p",[t._v("Need to track down the EndpointStore.sol contract, it does not appear in the link below.")]),t._v(" "),o("p",[t._v("Also who built/builds the Authorizer contract(s).")])]),t._v(" "),o("p",[o("RouterLink",{attrs:{to:"/next/technology/protocols/request-response/general-structure.html#endpointstore-sol"}},[t._v("EndpointStore.sol")]),t._v(" keeps a list of "),o("RouterLink",{attrs:{to:"/next/technology/protocols/request-response/authorizer.html"}},[t._v("authorizer")]),t._v(" addresses for each "),o("code",[t._v("airnodeId")]),t._v("â€“"),o("code",[t._v("endpointId")]),t._v(" pair. An authorizer is a contract that Airnode calls to check if it should respond to a specific request. It can enforce any kind of authorization policy that one could implement as a contract.")],1),t._v(" "),o("h2",{attrs:{id:"deny-all"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#deny-all"}},[t._v("#")]),t._v(" Deny all")]),t._v(" "),o("p",[t._v("A newly created Airnode defaults to "),o("strong",[t._v("Deny All")]),t._v(" for all its endpoints. The authorizers for all endpoints of an Airnode is an empty list. An empty authorizers list means that endpoint is not allowed to be used by anyone. Therefore, after deploying your Airnode, you must also set authorizers for your endpoints to allow access.")]),t._v(" "),o("h2",{attrs:{id:"allow-all"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#allow-all"}},[t._v("#")]),t._v(" Allow all")]),t._v(" "),o("Todo",[o("p",[t._v("Pretty sure the providerAdmin should be airnodeAdmin. Just need to find the code behind all this for version 0.1.0. Same for providerId as airnodeId.")])]),t._v(" "),o("p",[t._v("The simplest authorization policy is opening the endpoint to the public, so let us see how to do that first. Authorizers being set to "),o("code",[t._v("[0]")]),t._v(" means that all requests made to it will be authorized (i.e., will be responded to by Airnode). Only the "),o("code",[t._v("providerAdmin")]),t._v(" of a provider can update the authorizers of its endpoints. Therefore, you will need to make a transaction using the provider admin address (that you have set in "),o("code",[t._v("config.json")]),t._v(" as "),o("code",[t._v("providerAdminForRecordCreation")]),t._v(") to "),o("RouterLink",{attrs:{to:"/next/technology/protocols/request-response/general-structure.html#endpointstore-sol"}},[t._v("EndpointStore.sol")]),t._v(". In JS (using ethers.js):")],1),t._v(" "),o("div",{staticClass:"language-js line-numbers-mode"},[o("pre",{pre:!0,attrs:{class:"language-js"}},[o("code",[t._v("airnode"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("connect")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("providerAdmin"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("updateEndpointAuthorizers")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("providerId"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" endpointId"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ethers"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("constants"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("AddressZero"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),o("div",{staticClass:"line-numbers-wrapper"},[o("span",{staticClass:"line-number"},[t._v("1")]),o("br")])]),o("p",[t._v("You can also use "),o("a",{attrs:{href:"https://github.com/api3dao/airnode/tree/pre-alpha/packages/admin#update-authorizers",target:"_blank",rel:"noopener noreferrer"}},[t._v("@api3/airnode-admin"),o("OutboundLink")],1),t._v(" to update endpoint authorizers.")]),t._v(" "),o("div",{staticClass:"language-bash line-numbers-mode"},[o("pre",{pre:!0,attrs:{class:"language-bash"}},[o("code",[t._v("npx @api3/airnode-admin update-authorizers "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --providerUrl https://ropsten.infura.io/v3/"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("KEY"),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --mnemonic "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"nature about salad..."')]),t._v(" "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --providerId 0xe1e0dd"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --endpointId 0x260558"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n  --authorizersFilePath ./authorizers.json\n")])]),t._v(" "),o("div",{staticClass:"line-numbers-wrapper"},[o("span",{staticClass:"line-number"},[t._v("1")]),o("br"),o("span",{staticClass:"line-number"},[t._v("2")]),o("br"),o("span",{staticClass:"line-number"},[t._v("3")]),o("br"),o("span",{staticClass:"line-number"},[t._v("4")]),o("br"),o("span",{staticClass:"line-number"},[t._v("5")]),o("br"),o("span",{staticClass:"line-number"},[t._v("6")]),o("br")])]),o("p",[t._v("After making this transaction, your Airnode will respond to all requests.\nNote that being able to do this on-chain through "),o("code",[t._v("providerAdmin")]),t._v(" allows you to update your authorization policies without interacting with your Airnode or having to redeploy it.")]),t._v(" "),o("h2",{attrs:{id:"custom-authorization-policies"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#custom-authorization-policies"}},[t._v("#")]),t._v(" Custom authorization policies")]),t._v(" "),o("p",[t._v("We have mentioned that authorizer contracts can implement any arbitrary authorization logic.\nSee "),o("a",{attrs:{href:"https://github.com/api3dao/airnode/blob/pre-alpha/packages/protocol/contracts/authorizers/MinBalanceAuthorizer.sol",target:"_blank",rel:"noopener noreferrer"}},[t._v("this example"),o("OutboundLink")],1),t._v(" where Airnode only responds to requests if the wallet it will use to fulfill the request has a balance more than an amount set by the provider admin.")]),t._v(" "),o("p",[t._v("The authorizer list allows you to combine single-purpose authorizer contracts to form complex policies as described in the "),o("RouterLink",{attrs:{to:"/next/technology/protocols/request-response/authorizer.html#authorizer-list"}},[t._v("docs")]),t._v(".\nIf you would like to contribute to this set of authorizer contracts, please join the conversation in "),o("a",{attrs:{href:"https://github.com/api3dao/airnode/issues/38",target:"_blank",rel:"noopener noreferrer"}},[t._v("this issue"),o("OutboundLink")],1),t._v(".")],1),t._v(" "),o("h2",{attrs:{id:"conclusion"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#conclusion"}},[t._v("#")]),t._v(" Conclusion")]),t._v(" "),o("p",[t._v("Your Airnode is completely set up now.\nThe following guides will be on how a requester would be able to make requests to it.")])],1)}),[],!1,null,null,null);e.default=n.exports}}]);